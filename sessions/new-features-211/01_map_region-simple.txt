まずは、簡単なアプリケーションを作ってみましょう。

アマノ技研さんから提供されている、Geospatial Dataを使って
世界の首都の位置を地図上に表示してみます。

世界の首都の位置データをダウンロードしています。
https://amano-tec.com/data/world.html

クイックSQLを使って以下の表を定義します。
WRD1の末尾の数値は作業ごとの変更します。（作業の確認で、何度もアプリを作るため）。

---
# prefix: wrd1
# semantics: default
# genpk: false
capitals
    country_code vc2
    name_jp vc160
    name_jps vc80
    capital_jp vc160
    name_en vc160
    name_ens vc80
    capital_en vc160
    latitude num
    longitude num
----

SQLの生成から表の作成まで順次実施する。
アプリケーションの作成を実施する。

名前を、世界の首都１（数値はわかるように）として、特別なことをせずに作成する。
アプリケーションが出来上がる。

せっかくなので、新しいデータ・ロードの画面を作って、それを使って、世界の首都の座様をロードします。

共有コンポーネントからデータ・ロード定義を開いて、作成をクリックする。

名前をCAPITALSとする。表はWRD1_CAPITALSを選ぶ。
サンプル・ファイルとして

h3104world_utf8.csv

を選択する。

ファイル・エンコーディングにUTF-8を選択し、プレビューを表示させる。

列のマッピングとして、

LATにLATITUDE(緯度)を選択する。
LONのLONGITUDE(経度)を選択する。
COUNTRY_CODEを主キーとしてチェックを入れる。

ページの作成および追加を実行する。

ページの名前は、データのロード、とする。

ナビゲーションエントリは作成する。

データ・ロードはCAPITALS、ファイル、ファイルサイズは5MBで、デフォルトのままで、ページを作成する。

データをロードするページができたので、実行する。

ファイルの選択をクリックし、h3014world_utf8.csvを選択する。

プレビューを確認して、データのロードをクリックする。
198行がロードされる。

ナビゲーション・メニューからCapitalsを選んで開き、ロードされたデータを見てみる。

ここのlatitude, longitude(緯度、経度)のデータを使います。

ページ・デザイナにスイッチする。

ページの作成を開始する。

マップを選ぶ。

ページ名は、世界の首都、とする。

ナビゲーション・エントリを作成する。

表、ビューの名前はWRD1_CAPITALSを選ぶ。

レイヤーを選択する。ジオメトリ列タイプは

2つの整数列、
経度にLONGITUDE、緯度にLATITUDEを選び、ツールチップはCAPITAL_JPとする。

ファセット検索の作成もONにする。

作成をクリックする。

ページができたら、動作を確認する。

世界地図は表示される。デフォルトは日本語が極東の位置にあります。

世界の首都のチェックボックスを入れたり外したりする。
ファセット検索は、適当なファセットになる列が見つからなかったので、検索ボックスのみが作成されています。
日本を入れて検索する。アメリカを入れてみる。

マップの属性を開いて、背景を変えてみる。

背景をカスタムにして、標準をOracle World Mapに変更する。

ページを実行する。検索が残っていたら、リセットをクリックする。

虫眼鏡を選んで、日本の周りを拡大する。

以上で、基本的なマップ・リージョンの作り方は完了です。
